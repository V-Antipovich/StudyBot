# Виталий Антипович - "База таможенных деклараций"
# Пользовательские сценарии

### Группа: 10И2
### Электронная почта: voantipovich@edu.hse.ru
### VK: https://vk.com/vitaly_antipovich


### [ Сценарий 1 - Регистрация/Вход пользователя в систему ]
1. Администратор, желающий добавить нового пользователя, регистрирует его в системе с помощью почты сотрудника
2. На указанную почту сотруднику приходят его логин, пароль и ссылка для подтверждения регистрации
3. Этот сотрудник должен подтвердить регистрацию, кликнув на ссылку в письме
4. Уже на сайте пользователь, не зашедший в систему, нажимает на кнопку "Войти"
5. Пользователь вводит свой логин и пароль
6. Если логин и/или пароль неверны, система выводит предупреждение об этом, заставляя ввести данные ещё раз
7. Если логин и пароль правильные, то пользователь попадает на страницу профиля.

### [ Сценарий 2 - Загрузка ГТД ]
1. На горизонтальном меню пользователь выбирает опцию "документы"
2. На новой странице пользователь находит кнопку "Добавить ГТД"
3. Пользователю предоставляется возможность загрузить с устройства xml-файлы
4. Пользователь обязан убедиться, что файлы, который он собирается добавить, составлен правильно (как минимум - присутствует номер ГТД)
5. Также пользователь выбирает в одном из полей формы, что делать в случае если ГТД с таким номером уже есть в базе: заменять или пропускать 
6. Пользователь ждет, пока система парсит файл и обновляет нужные таблицы и справочники
7. После окончания парсинга пользователь перенаправляется на страницу с логом, в котором выведено количество загруженных файлов и список номеров пропущенных, замененных и новых
8. При нажатии на какой-либо из номеров пользователь может перейти на страницу с подробной информацией об 
9. Если ни одно, даже первое действие совершить не удалось, пользователь должен убедиться, что его Роль - Сотрудник таможенного отдела или Администратор,
то есть он имеет право выполнять это действие (в противном случае сценарий не работает для конкретного сотрудника). Об ошибках уведомлять администратора.

### [ Сценарий 3 - Формирование статистических отчетов ]
1. На горизонтальном меню пользователь выбирает пункт "отчеты"
2. В выпадающем списке пользователь выбирает опцию нужного статистического отчета 
3. На новой странице пользователь выбирает требуемый диапазон времени, за который должен быть сгенерирован отчет
4. После того как диапазон выбран, пользователь подтверждает генерацию отчета
5. На экране загружается отчет по нужному диапазону для пользователя
6. Пользователь может скачать отчет по кнопке "Сохранить"
7. Если сценарий выполнить не удалось, пользователь убеждается, что его роль - Аналитик, иначе доступа к сценарию не имеет. Об ошибках уведомлять администратора.

### [ Сценарий 4 - Формирование данных для WMS ]
1. Пользователь на горизонтальном меню выбирает пункт "документы"
2. В выпадающем списке выбирает "ГТД"
3. На новой странице пользователь ищет нужную ему ГТД и выбирает её.
4. На открывшейся странице пользователь выбирает опцию "Экспорт в WMS"
5. Если эта ГТД уже была когда-то экспортирована в WMS, система спросит, хочет ли пользователь сделать это ещё раз
6. При утвердительном решении пользователя система генерирует xml-файл по заданному образцу и помещает его в нужную папку (не задается пользователем),
откуда с третьей стороны (WMS) файл смогут забрать и использовать
7. Если пользователь передумал снова экспортировать файл в WMS, он выбирает отрицательный ответ (от п. 5) и возвращается на страницу ГТД
8. Если на каком-то этапе сценария пользователь не смог выполнить какой-либо шаг, он должен убедиться, что его роль - Сотрудник таможенного отдела.
При возникновении проблемы он должен обратиться к администратору.

### [ Сценарий 5 - Формирование данных для ERP ]
1. Пользователь на горизонтальном меню выбирает пункт "документы"
2. В выпадающем списке выбирает "ГТД"
3. На новой странице пользователь ищет нужную ему ГТД и выбирает её.
4. На открывшейся странице пользователь выбирает опцию "Экспорт в ERP"
5. Если уже имел место экспорт данной ГТД в ERP, система спросит, хочет ли пользователь сделать это ещё раз
6. Если пользователь подтверждает своё решение, система генерирует xml-файл по требуемому шаблону и помещает его в заданую папку,
в которую третьей стороне (со стороны ERP) разрешен доступ для сбора файлов.
7. Если пользователь решил не экспортировать файл в ERP, он вместо подтверждения операции выбирает её отмену, 
после чего возвращается к ГТД
8. Если у пользователя возникают проблемы при выполнении какого-либо из шагов сценария, он должен убедиться, что его роль - Бухгалтер.
При возникновении проблемы он должен обратиться к администратору.

### [ Сценарий 6 - Подготовка данных для отчета по экологическому сбору]
1. Пользователь на горизонтальном меню выбирает пункт "отчеты"
2. В открывшемся окне находится и выбирается опция "Данные для отчета по экологическому сбору"
3. На новой странице пользователь выбирает требуемый диапазон времени (период), за которое должен быть сгенерирован отчет
4. Чтобы система начала генерацию по нужному шаблону, пользователь подтверждает своё решение соответствующей кнопкой
5. Система собирает данные и показывает пользователю в виде списка с раскрывающимися элементами
6. Пользователь может подтвердить создание файла в формате .xlsx, в таком случае он сохраняется на сервере
7. Пользователь может скачать отчет нажатием кнопки "сохранить"

### [ Сценарий 7 - Работа с документами ГТД ]
1. Пользователь выбирает в горизонтальном меню "Документы"
2. В выпадающем списке пользователь выбирает "ГТД"
3. В открывшемся списке ГТД он может перемещаться по страницам, фильтровать данные
или сортировать колонки таблицы
4. Если пользователь хочет подробнее изучить ГТД, он нажимает на её номер, 
переходя на страницу подробной информации
5. На персональной странице ГТД пользователь может перемещаться между "шапкой" документа и списком групп товаров
6. В разделе "шапки" пользователь может ознакомиться с xml-документом ГТД, 
данные в которой лежат на данный момент в базе. При желании он может сохранить документ себе на устройство.
7. При нажатии на группу товаров под таблицей групп раскрывается список товаров, принадлежащий группе
8. Нажимая на специально отведенные кнопки, пользователь может вносить изменения в "шапку", группы или товары.

### [ Сценарий 8 - Работа со справочниками ]
1. Пользователь выбирает в горизонтальном меню "Справочники"
2. В выпадающем списке он выбирает категорию справочной информации, которую он хочет вывести
3. На загрузившейся странице пользователю предоставлена таблица с данными нужного справочника
4. Пользователь может сортировать колонки, выполнять фильтрацию данных и переключаться между страницами (пагинация)
5. Если у пользователя роль Сотрудник таможенного отдела, он может сохранить себе справочник.
6. Если у пользователя роль Сотрудник таможенного отдела, он может вносить в колонки таблицы изменения 
или удалять некоторые данные
7. Если указанные выше действия сценария не удалось произвести, пользователь должен проверить свою роль
или обратиться к администратору
